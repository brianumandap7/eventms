<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Averages Page</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container">
    <h2>Averages for Event {{ tag }}</h2>
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Q1 Average</h5>
                        <p class="card-text">{{ averages.avg_q1 }}</p>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Q2 Average</h5>
                        <p class="card-text">{{ averages.avg_q2 }}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Q3 Average</h5>
                        <p class="card-text">{{ averages.avg_q3 }}</p>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Q4 Average</h5>
                        <p class="card-text">{{ averages.avg_q4 }}</p>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <b><h3>Categories: <small>Q1 to Q4 <strong>(top to bottom)</strong></small></h3></b>
        {% for items in basis %}
    	<div class="container">
    		{{items.category}}
    	</div>
    	{% endfor %}
        

        <canvas id="barGraph" width="400" height="200"></canvas>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
		    // Sample data for the bar graph
		    const averages = {
		        avg_q1: {{ averages.avg_q1 }},
		        avg_q2: {{ averages.avg_q2 }},
		        avg_q3: {{ averages.avg_q3 }},
		        avg_q4: {{ averages.avg_q4 }},
		    };
		    const labels = ['Category 1', 'Category 2', 'Category 3', 'Category 4'];

		    const backgroundColors = [
		        'rgba(255, 99, 132, 0.5)', // Red
		        'rgba(54, 162, 235, 0.5)', // Blue
		        'rgba(255, 206, 86, 0.5)', // Yellow
		        'rgba(75, 192, 192, 0.5)', // Green
		    ];
		    const data = {
		        labels: labels,
		        datasets: [{
		            label: 'Feedback Ratings',
		            backgroundColor: backgroundColors,
		            borderColor: 'rgba(54, 162, 235, 1)',
		            borderWidth: 1,
		            data: [averages.avg_q1, averages.avg_q2, averages.avg_q3, averages.avg_q4], // Sample ratings data for each category
		        }]
		    };

		    // Render the bar graph
		    const ctx = document.getElementById('barGraph').getContext('2d');
		    const myChart = new Chart(ctx, {
		        type: 'bar',
		        data: data,
		        options: {
		            scales: {
		                y: {
		                    beginAtZero: true
		                }
		            }
		        }
		    });
		</script>

</div>

<!-- Bootstrap JS and Popper.js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
